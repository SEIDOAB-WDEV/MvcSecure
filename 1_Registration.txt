Purpose:
Adding security to AppRazor and AppMvc

Add Asp.Net.Core Identity Registration capabilities with Email verification

Steps:
1. In Models/Authorization add first name and last name to User
        public string FirstName { get; set; }
        public string LastName { get; set; }

2. In Services add a NuGet package
   <PackageReference Include="MailKit" Version="4.8.0" />

3. In Services add a Service to send email
 public class EmailService : IEmailSender


AppRazor
-------

4. In Program.cs add EmailService as a transient Service using Dependecy Injection

5. In Application create a directory TempMail for all emails

6. Migrate and update the database. With Terminal in folder _scripts 

        ./database-rebuild-all.sh sql-music sqlserver docker dbo ../AppRazor
   or   
        ./database-rebuild-all.ps1 sql-music sqlserver docker dbo ../AppRazor

   Ensure no errors from build, migration or database update
   Execute the initDatabase.sql script in a database access tool

7. In Pages add folder Account add pages to register and confirm email into the folder
   Add a Register Razor page and model
   Add a RegisterConfirmation and model
   Add a ConfirmEmail Razor page and model

8. In Pages/Shared/_Layout add a menu item to Register page

9. Execute and register users to the database

10. Check the AspNetUser Table in the database

11. Check the TempMail folder and open the email, click on the link and see the email confirmation

12. Check again the AspNetUser Table in the database


AppMvc
-------

4. In Program.cs add EmailService as a transient Service using Dependecy Injection

5. In Application create a directory TempMail for all emails

6. Migrate and update the database. With Terminal in folder _scripts 

        ./database-rebuild-all.sh sql-music sqlserver docker dbo ../AppMvc
   or   
        ./database-rebuild-all.ps1 sql-music sqlserver docker dbo ../AppMvc

   Ensure no errors from build, migration or database update
   Execute the initDatabase.sql script in a database access tool


7. In AccountController add
   Actions ConfirmEmail(...), Register (...), RegisterSave (...) and RegisterConfirmation(...)

   In Models add RegisterViewModel

   In Views/Account add Register.cshtml and RegisterConfirmation.cshtml

8. In Views/Shared/_Layout add a menu item to Register page

9. Execute and register users to the database

10. Check the AspNetUser Table in the database

11. Check the TempMail folder and open the email, click on the link and see the email confirmation

12. Check again the AspNetUser Table in the database
